{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/events.css' %}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/6.1.15/index.min.js"></script>
{% endblock %}


{% block content %}
<main>
    <div class="separator"></div>
    <h1>EVENTOS PRESENCIALES</h1>
    
    <br>
    <br>
    <div class="separator"></div>
    <h1>EVENTOS VIRTUALES</h1>
    <p>En construcción</p>
    <br>
    <br>
    
    <div class="separator"></div>
    <h1>PRÓXIMOS EVENTOS</h1>
        <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css' rel='stylesheet' />
        <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js'></script>
        <script src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js'></script>
        <script src='https://cdn.jsdelivr.net/npm/tooltip.js@1.3.3/dist/umd/tooltip.min.js'></script>

        <div id="calendar"></div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var calendarEl = document.getElementById('calendar');
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    locale: 'es',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                    },
                    buttonText: {
                        today: 'Hoy',
                        week: 'Semana',
                        month: 'Mes',
                        day: 'Día',
                        list: 'Lista'
                    },
                    events: [
                        {% for evento in eventos %}
                        {
                            title: '{{ evento.titulo }}',
                            start: '{{ evento.fecha_inicio|date:"Y-m-dTH:i:s" }}',
                            description: 'Descripción: {{ evento.descripcion }}'
                        },
                        {% endfor %}
                    ],
                    eventDidMount: function(info) {
                        var tooltip = new Tooltip(info.el, {
                            title: info.event.extendedProps.description,
                            placement: 'top',
                            trigger: 'hover',
                            container: 'body'
                        });
                    }
                });
                calendar.render();
            });
        </script>
</main>
{% endblock %}

{% comment %} 
Queria poner un calendario pero me quedo en ingles
Hay partes del calendario en url, view, models porque intente vincularlo con el admin de Django
El calendario debe tener Titulo, Lugar, Zona, Hora, Descripcion  
{% endcomment %}